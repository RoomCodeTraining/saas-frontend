<app-sidebar></app-sidebar>
<div class="main-content">
    <app-header></app-header>    
    <div class="p-5">
        <div class="p-6 animate__animated" :class="[$store.app.animation]">
            <div x-data="sales">
                <ul class="flex space-x-2 rtl:space-x-reverse">
                    <li class="before:content-['/'] ltr:before:mr-1 rtl:before:ml-1">
                        <span>Liste des portefeuilles</span>
                    </li>
                </ul>
    
                <div class="pt-5" *ngIf="!itemSelected && !addItem && !walletItem">
                    <div class="flex items-center justify-between flex-wrap gap-4 mb-5">
                        <div class="flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto">
                            <div class="flex gap-3">
                                <div class="relative ">
                                    <button type="button" (click)="goBack();" class="btn btn-dark">Retour</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between flex-wrap gap-4">
                        <h2 class="text-xl">Liste des portefeuilles de {{entity?.name}}</h2>
                        <div class="flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto">
                            <div class="flex gap-3">
                                <div class="relative ">
                                    <form (submit)="search()">
                                        <input type="text" placeholder="Recherche" name="information" [(ngModel)]="information" class="form-input py-2 ltr:pr-11 rtl:pl-11 peer"/>
                                        <div class="absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary">
                        
                                            <svg class="mx-auto" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="11.5" cy="11.5" r="9.5" stroke="currentColor" stroke-width="1.5" opacity="0.5"></circle>
                                                <path d="M18.5 18.5L22 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
                                            </svg>
                                        </div>
                                    </form>
                                </div>
                                <div>
                                    <button type="button" class="btn btn-primary" (click)="itemWallet()">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Nouveau portefeuille
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table-hover">
                            <thead>
                                <tr>
                                    <th>N°</th>
                                    <th>Action</th>
                                    <th>Référence</th>
                                    <th>Produit</th>
                                    <th>Partenaire</th>
                                    <th>Solde</th>
                                    <th>Date du premier du rechargement</th>
                                    <th>Date du dernier du rechargement</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody *ngIf="listItem?.length > 0">
                                <tr *ngFor="let item of listItem; let i = index;">
                                    <td>{{i+1}}</td>
                                    <td class="text-center">
                                        <ul class="flex gap-2">
                                            <li>
                                                <a href="javascript:;" x-tooltip="Détails" (click)="itemDetails(item)">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5">
                                                        <path
                                                            opacity="0.5"
                                                            d="M3.27489 15.2957C2.42496 14.1915 2 13.6394 2 12C2 10.3606 2.42496 9.80853 3.27489 8.70433C4.97196 6.49956 7.81811 4 12 4C16.1819 4 19.028 6.49956 20.7251 8.70433C21.575 9.80853 22 10.3606 22 12C22 13.6394 21.575 14.1915 20.7251 15.2957C19.028 17.5004 16.1819 20 12 20C7.81811 20 4.97196 17.5004 3.27489 15.2957Z"
                                                            stroke="currentColor"
                                                            stroke-width="1.5"
                                                        ></path>
                                                        <path d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z" stroke="currentColor" stroke-width="1.5"></path>
                                                    </svg>
                                                </a>
                                            </li> 
                                            <li>
                                                <a href="javascript:;" x-tooltip="Historique des opérations" (click)="itemOperationHistory(item)">
                                                    <svg class="group-hover:!text-primary" width="20" height="20" viewBox="0 0 24 24"
                                                        fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4.5 h-4.5 text-primary">
                                                        <path opacity="0.5"
                                                            d="M12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22Z"
                                                            fill="currentColor" />
                                                        <path
                                                            d="M18.75 8C18.75 8.41421 18.4142 8.75 18 8.75H6C5.58579 8.75 5.25 8.41421 5.25 8C5.25 7.58579 5.58579 7.25 6 7.25H18C18.4142 7.25 18.75 7.58579 18.75 8Z"
                                                            fill="currentColor" />
                                                        <path
                                                            d="M18.75 12C18.75 12.4142 18.4142 12.75 18 12.75H6C5.58579 12.75 5.25 12.4142 5.25 12C5.25 11.5858 5.58579 11.25 6 11.25H18C18.4142 11.25 18.75 11.5858 18.75 12Z"
                                                            fill="currentColor" />
                                                        <path
                                                            d="M18.75 16C18.75 16.4142 18.4142 16.75 18 16.75H6C5.58579 16.75 5.25 16.4142 5.25 16C5.25 15.5858 5.58579 15.25 6 15.25H18C18.4142 15.25 18.75 15.5858 18.75 16Z"
                                                            fill="currentColor" />
                                                    </svg>
                                                </a>
                                            </li> 
                                        </ul>
                                    </td>
                                    <td>{{item?.reference}}</td>
                                    <td>{{item?.entity_product?.product?.label}}</td>
                                    <td>{{item?.entity?.name}}</td>
                                    <td>{{item?.balance | number:'':'fr-FR'}} FCFA</td>
                                    <td>{{item?.created_at | date: 'dd/MM/YYYY HH:mm:ss'}}</td>
                                    <td>{{item?.updated_at | date: 'dd/MM/YYYY HH:mm:ss'}}</td>
                                    <td> 
                                        <span class="badge bg-success" *ngIf="item?.status.id == 1">{{item?.status.label}}</span>
                                        <span class="badge bg-danger" *ngIf="item?.status.id == 2">{{item?.status.label}}</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <h1 *ngIf="listItem?.length <= 0" class="text-center items-center p-2">Aucune donnée à afficher</h1>
                    </div>
                    <div class="flex justify-center flex-col w-full mt-2">
                        <div class="grid grid-cols-1 grid-cols-2 gap-2">
                            <div style="padding-top: 10px;">
                                <div class="d-flex mr-5" *ngIf="total">
                                    <b>Affichage de {{from}} à {{to}} sur {{total | number:'':'fr-FR'}} éléments</b>
                                </div>
                                <div class="d-flex mr-5" *ngIf="!total">
                                    <b>Affichage de 0 à 0 sur 0 élément</b>
                                </div>
                            </div>
                            <div class="inline-flex items-center space-x-1 rtl:space-x-reverse m-auto mb-4">
                                <ul class="inline-flex items-center space-x-1 rtl:space-x-reverse m-auto mb-4" *ngIf="total > per_page">
                                    <li (click)="firstPage()">
                                        <button type="button" [disabled]="current_page <= 1" class="flex justify-center font-semibold p-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 rtl:rotate-180">
                                                <path d="M13 19L7 12L13 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                <path opacity="0.5" d="M16.9998 19L10.9998 12L16.9998 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </li>
                                    <li (click)="previousPage()">
                                        <button type="button" [disabled]="current_page <= 1" class="flex justify-center font-semibold p-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 rtl:rotate-180">
                                                <path d="M15 5L9 12L15 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </li>
                                    <li *ngIf="current_page > 2 && (from - (per_page * 2)) < total">
                                        <button type="button" (click)="otherPageLeft2()" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            {{current_page - 2}}
                                        </button>
                                    </li>
                                    <li *ngIf="current_page > 1 && (from - per_page) < total">
                                        <button type="button" (click)="otherPageLeft1()" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            {{current_page - 1}}
                                        </button>
                                    </li>
                                    <li *ngIf="current_page == 1">
                                        <button type="button" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-primary text-white dark:text-white-light dark:bg-primary">
                                            {{current_page}}
                                        </button>
                                    </li>
                                    <li *ngIf="current_page > 1">
                                        <button type="button" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-primary text-white dark:text-white-light dark:bg-primary">
                                            {{current_page}}
                                        </button>
                                    </li>
                                    <li *ngIf="(from + per_page) < total">
                                        <button type="button" (click)="otherPageRigth1()" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            {{current_page + 1}}
                                        </button>
                                    </li>
                                    <li *ngIf="(from + (per_page * 2)) < total">
                                        <button type="button" (click)="otherPageRigth2()" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            {{(current_page / 1) + 2}}
                                        </button>
                                    </li>
                                    <li (click)="nextPage()">
                                        <button type="button" [disabled]="to >= total" class="flex justify-center font-semibold p-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 rtl:rotate-180">
                                                <path d="M9 5L15 12L9 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </li>
                                    <li (click)="lastPage()" tabindex="-1">
                                        <button type="button" [disabled]="to >= total" class="flex justify-center font-semibold p-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 rtl:rotate-180">
                                                <path d="M11 19L17 12L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                <path opacity="0.5" d="M6.99976 19L12.9998 12L6.99976 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="addItem">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Ajout d'un nouveau wallet</h5>
                                    <div class="p-5">
                                        <form class="space-y-5" style="padding-bottom: 100px;" (submit)="save()">
                                            <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                                <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                            </div>
                                            <div class="grid grid-cols-1 grid-cols-2 gap-2">
                                                <div class="mb-3" [formGroup]="formGroupAdd">
                                                    <label>Nom <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" formControlName="name" [ngClass]="{ 'is-invalid': submitted && f['name'].errors }"
                                                        name="name" [(ngModel)]="name" />
                                                    <div *ngIf="submitted && f['name'].errors" class="mt-1">
                                                        <div *ngIf="submitted && f['name'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupAdd">
                                                    <label>Adresse géographique <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" formControlName="address" [ngClass]="{ 'is-invalid': submitted && f['address'].errors }"
                                                        name="address" [(ngModel)]="address" />
                                                    <div *ngIf="submitted && f['address'].errors" class="mt-1">
                                                        <div *ngIf="submitted && f['address'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupAdd">
                                                    <label>Téléphone <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" formControlName="telephone" [ngClass]="{ 'is-invalid': submitted && f['telephone'].errors }"
                                                        name="telephone" [(ngModel)]="telephone" />
                                                    <div *ngIf="submitted && f['telephone'].errors" class="mt-1">
                                                        <div *ngIf="submitted && f['telephone'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                    <div *ngIf="exist_phone_error" class="mt-1">
                                                        <div class="text-danger">{{phone_error}}</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupAdd">
                                                    <label>Email <span style="color:red">*</span></label>
                                                    <input type="email" class="form-input" formControlName="email" [ngClass]="{ 'is-invalid': submitted && f['email'].errors }"
                                                        name="email" [(ngModel)]="email" />
                                                    <div *ngIf="submitted && f['email'].errors" class="mt-1">
                                                        <div *ngIf="submitted && f['email'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                        <div *ngIf="submitted && f['email'].errors?.['email']" class="text-danger">Ce champ doit être une adresse email !</div>
                                                    </div>
                                                </div>
                                                <!-- <div class="mb-3">
                                                    <label>Logo (png,jpg,jpeg,gif)</label>
                                                    <div class="user-pro-img">
                                                        <img id="blah" [src]="logoSrc || 'assets/images/_.png' || logo == ''" width="300" height="50" alt="logo" />
                                                    </div>
                                                    <input type="file" name="logo" [(ngModel)]="logo" class="multi file-upload-input with-preview" (change)="onSelectLogo($event)" id="customFileLang" [ngClass]="{ 'is-invalid': submitted && f['logo'].errors }" lang="fr">
                                                    <div *ngIf="logoError" class="mt-1">
                                                        <div class="text-danger">{{logoErrorMessage}}</div>
                                                    </div>
                                                </div> -->
                                            </div>
                
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="resetAll(); addItem = !addItem" class="btn btn-outline-danger">Annuler</button>
                                                <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="!submit">Enregistrer</button>
                                                <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="submit">
                                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                        <line x1="2" y1="12" x2="6" y2="12"></line>
                                                        <line x1="18" y1="12" x2="22" y2="12"></line>
                                                        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                    </svg>
                                                    Patientez ...
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="itemSelected && itemDetail">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Détails du portefeuille {{itemSelected?.entity_product?.product?.label}} de {{itemSelected?.entity?.name}}</h5>
                                    <div class="p-5">
                                        <div class="flex items-center justify-between flex-wrap gap-4 pb-5">
                                            <h2></h2>
                                            <div class="flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto">
                                                <div class="flex gap-3">
                                                    <div>
                                                        <button type="button" (click)="itemOperationMandate(itemSelected)" class="btn btn-primary">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                                            </svg>
                                                            Nouveau mandat
                                                        </button>
                                                    </div>
                                                    <div>
                                                        <button type="button" (click)="itemOperationDelivery(itemSelected)" class="btn btn-primary">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                                            </svg>
                                                            Nouvelle livraison
                                                        </button>
                                                    </div>
                                                    <!-- <div>
                                                        <button type="button" (click)="itemOperationPayment(itemSelected)" class="btn btn-primary">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                                            </svg>
                                                            Versement
                                                        </button>
                                                    </div> -->
                                                    <div>
                                                        <button type="button" (click)="itemOperationRepayment(itemSelected)" class="btn btn-primary">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                                            </svg>
                                                            Remboursement
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table-hover">
                                                <tbody>
                                                    <tr>
                                                        <th>Référence</th>
                                                        <td>{{itemSelected?.reference}}</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Produit</th>
                                                        <td>{{itemSelected?.entity_product?.product?.label}}</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Partenaire</th>
                                                        <td>{{itemSelected?.entity?.name}}</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Solde</th>
                                                        <td>{{itemSelected?.balance | number:'':'fr-FR'}} FCFA</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Statut</th>
                                                        <td> 
                                                            <span class="badge badge-outline-success" *ngIf="itemSelected?.status?.id == 1">{{ itemSelected?.status?.label }}</span>
                                                            <span class="badge badge-outline-danger" *ngIf="itemSelected?.status?.id == 2">{{ itemSelected?.status?.label }}</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>Date du premier du rechargement</th>
                                                        <td>{{itemSelected?.created_at | date: 'dd/MM/YYYY HH:mm:ss'}}</td>
                                                    </tr>
                                                    <tr>
                                                        <th>Date du dernier du rechargement</th>
                                                        <td>{{itemSelected?.updated_at | date: 'dd/MM/YYYY HH:mm:ss'}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="itemSelected = !itemSelected" class="btn btn-outline-danger">Fermer</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="itemSelected && editItem">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Modification de {{itemSelected.name}}</h5>
                                    <div class="p-5">
                                        <form class="space-y-5" style="padding-bottom: 100px;" (submit)="update()">
                                            <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                                <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                            </div>
                                            <div class="grid grid-cols-1 grid-cols-2 gap-2">
                                                <!-- <div class="mb-3" [formGroup]="formGroupEdit">
                                                    <label>Type d'entité<span style="color:red">*</span></label>
                                                    <ng-select id="entity_type_id" name="entity_type_id" formControlName="entity_type_id" [(ngModel)]="entity_type_id">
                                                        <ng-option *ngFor="let item of listEntityType" [value]="item.id">{{item.name}}</ng-option>
                                                    </ng-select>
                                                    <div *ngIf="submitted && f['entity_type_id'].errors" class="mt-1">
                                                        <div *ngIf="submitted && f['entity_type_id'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div> -->
                                                <div class="mb-3" [formGroup]="formGroupEdit">
                                                    <label>Nom <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" formControlName="name" [ngClass]="{ 'is-invalid': submitted3 && f3['name'].errors }"
                                                        name="name" [(ngModel)]="name" />
                                                    <div *ngIf="submitted3 && f3['name'].errors" class="mt-1">
                                                        <div *ngIf="submitted3 && f3['name'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupEdit">
                                                    <label>Adresse géographique <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" formControlName="address" [ngClass]="{ 'is-invalid': submitted3 && f3['address'].errors }"
                                                        name="address" [(ngModel)]="address" />
                                                    <div *ngIf="submitted3 && f3['address'].errors" class="mt-1">
                                                        <div *ngIf="submitted3 && f3['address'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupEdit">
                                                    <label>Téléphone <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" formControlName="telephone" [ngClass]="{ 'is-invalid': submitted3 && f3['telephone'].errors }"
                                                        name="telephone" [(ngModel)]="telephone" />
                                                    <div *ngIf="submitted3 && f3['telephone'].errors" class="mt-1">
                                                        <div *ngIf="submitted3 && f3['telephone'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                    <div *ngIf="exist_phone_error" class="mt-1">
                                                        <div class="text-danger">{{phone_error}}</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupEdit">
                                                    <label>Email <span style="color:red">*</span></label>
                                                    <input type="email" class="form-input" formControlName="email" [ngClass]="{ 'is-invalid': submitted3 && f3['email'].errors }"
                                                        name="email" [(ngModel)]="email" />
                                                    <div *ngIf="submitted3 && f3['email'].errors" class="mt-1">
                                                        <div *ngIf="submitted3 && f3['email'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                        <div *ngIf="submitted3 && f3['email'].errors?.['pattern']" class="text-danger">Ce champ doit être une adresse email !</div>
                                                    </div>
                                                </div>
                                                <!-- <div class="mb-3">
                                                    <label>Logo</label>
                                                    <div class="user-pro-img" *ngIf="logofiles">
                                                        <img id="blah" [src]="logoSrc || 'assets/images/_.png'" width="300" height="50" alt="logo" />
                                                    </div>
                                                    <div class="user-pro-img" *ngIf="!logofiles">
                                                        <img src="{{itemSelected.logo}}" width="300" height="50" alt="logo" *ngIf="itemSelected.logo"/>
                                                        <img src="../../../assets/images/_.png" width="300" height="50" alt="logo" *ngIf="!itemSelected.logo"/>
                                                    </div>
                                                    <input type="file" [(ngModel)]="logo" class="multi file-upload-input with-preview" name="logo" (change)="onSelectLogo($event)" id="customFileLang" lang="fr">
                                                </div> -->
                                            </div>
                
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="resetAll(); itemSelected = !itemSelected" class="btn btn-outline-danger">Annuler</button>
                                                <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="!submit">Enregistrer</button>
                                                <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="submit">
                                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                        <line x1="2" y1="12" x2="6" y2="12"></line>
                                                        <line x1="18" y1="12" x2="22" y2="12"></line>
                                                        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                    </svg>
                                                    Patientez ...
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="addAdminItem">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Ajout d'un administrateur à {{itemSelected.name}}</h5>
                                    <div class="p-5">
                                        <form class="space-y-5" style="padding-bottom: 100px;" (submit)="create()">
                                            <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                                <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                            </div>
                                            <div class="grid grid-cols-1 grid-cols-2 gap-2">
                                                <div class="mb-3">
                                                    <label for="gridPassword">Vendeur <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected.name" readonly disabled />
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroup2">
                                                    <label for="gridPassword">Produit <span style="color:red">*</span></label>
                                                    <ng-select id="entity_product_id" name="entity_product_id" formControlName="entity_product_id" [(ngModel)]="entity_product_id" placeholder="Produit" [ngClass]="{ 'is-invalid': submitted2 && f2['entity_product_id'].errors }">
                                                        <ng-option *ngFor="let item of listEntityProduct" [value]="item.id">{{item.name}}</ng-option>
                                                    </ng-select>
                                                    <div *ngIf="submitted2 && f2['entity_product_id'].errors" class="mt-1">
                                                        <div *ngIf="submitted2 && f2['entity_product_id'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroup2">
                                                    <label>Poids <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="weight" [ngClass]="{ 'is-invalid': submitted2 && f2['weight'].errors }"
                                                        name="weight" [(ngModel)]="weight" />
                                                    <div *ngIf="submitted2 && f2['weight'].errors" class="mt-1">
                                                        <div *ngIf="submitted2 && f2['weight'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroup2">
                                                    <label>Prix <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="price" [ngClass]="{ 'is-invalid': submitted2 && f2['price'].errors }"
                                                        name="price" [(ngModel)]="price" />
                                                    <div *ngIf="submitted2 && f2['price'].errors" class="mt-1">
                                                        <div *ngIf="submitted2 && f2['price'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                            </div>
                
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="resetAll(); itemSelected = !itemSelected; addAdminItem = !addAdminItem" class="btn btn-outline-danger">Annuler</button>
                                                <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="!submit">Enregistrer</button>
                                                <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="submit">
                                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                        <line x1="2" y1="12" x2="6" y2="12"></line>
                                                        <line x1="18" y1="12" x2="22" y2="12"></line>
                                                        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                    </svg>
                                                    Patientez ...
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="operationHistoryItem">
                    <div class="flex items-center justify-between flex-wrap gap-4 mt-5 mb-5">
                        <div class="flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto">
                            <div class="flex gap-3">
                                <div class="relative ">
                                    <button type="button" (click)="resetAll(); itemSelected = !itemSelected; operationHistoryItem = !operationHistoryItem" class="btn btn-dark">Retour</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between flex-wrap gap-4 pb-5">
                        <h2></h2>
                        <div class="flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto">
                            <div class="flex gap-3">
                                <div>
                                    <button type="button" (click)="itemOperationMandate(itemSelected)" class="btn btn-primary">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Nouveau mandat
                                    </button>
                                </div>
                                <div>
                                    <button type="button" (click)="itemOperationDelivery(itemSelected)" class="btn btn-primary">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Nouvelle livraison
                                    </button>
                                </div>
                                <!-- <div>
                                    <button type="button" (click)="itemOperationPayment(itemSelected)" class="btn btn-primary">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Versement
                                    </button>
                                </div> -->
                                <div>
                                    <button type="button" (click)="itemOperationRepayment(itemSelected)" class="btn btn-primary">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">
                                            <line x1="12" y1="5" x2="12" y2="19"></line>
                                            <line x1="5" y1="12" x2="19" y2="12"></line>
                                        </svg>
                                        Remboursement
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between flex-wrap gap-4 mt-5 mb-5">
                        <h2 class="text-xl">Historique des operations du portefeuille {{itemSelected?.entity_product?.product?.label}} de {{itemSelected?.entity?.name}}</h2>
                        <div class="flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto">
                            <div class="flex gap-3">
                                <div class="relative ">
                                    <form (submit)="searchOperation()">
                                        <input type="text" placeholder="Recherche" name="informationOperation" [(ngModel)]="informationOperation" class="form-input py-2 ltr:pr-11 rtl:pl-11 peer"/>
                                        <div class="absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary">
                        
                                            <svg class="mx-auto" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="11.5" cy="11.5" r="9.5" stroke="currentColor" stroke-width="1.5" opacity="0.5"></circle>
                                                <path d="M18.5 18.5L22 22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
                                            </svg>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <form class="space-y-5" style="padding-bottom: 10px; padding-left: 0%; padding-right: 0%;" *ngIf="listStatistics">
                        <div class="grid grid-cols-1 grid-cols-4 gap-4">
                            <div class="mb-3">
                                <label>Mandats</label>
                                <h3 class="form-input">{{listStatistics.mandate | number:'':'fr-FR'}} FCFA</h3>
                            </div>
                            <div class="mb-3">
                                <label>Livraison</label>
                                <h3 class="form-input">{{listStatistics.delivery | number:'':'fr-FR'}} FCFA</h3>
                            </div>
                            <!-- <div class="mb-3">
                                <label>Versement</label>
                                <h3 class="form-input">{{listStatistics.payment | number:'':'fr-FR'}} FCFA</h3>
                            </div> -->
                            <div class="mb-3">
                                <label>Remboursement</label>
                                <h3 class="form-input">{{listStatistics.repayment | number:'':'fr-FR'}} FCFA</h3>
                            </div>
                            <div class="mb-3">
                                <label>Solde</label>
                                <h3 class="form-input">{{listStatistics.balance | number:'':'fr-FR'}} FCFA</h3>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 grid-cols-3 gap-3">
                            <div class="mb-3">
                                <label>Total de sacs déclarés </label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_bags_declared | number:'':'fr-FR'}}</h3>
                            </div>
                            <div class="mb-3">
                                <label>Total de poids déclarés </label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_weight_declared | number:'':'fr-FR'}}</h3>
                            </div>
                            <div class="mb-3">
                                <label>Total de réfractions</label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_refact | number:'':'fr-FR'}}</h3>
                            </div>
                        </div>  
                        <div class="grid grid-cols-1 grid-cols-3 gap-3">
                            <div class="mb-3">
                                <label>Total de sacs livrés </label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_bags_accepted | number:'':'fr-FR'}}</h3>
                            </div>
                            <div class="mb-3">
                                <label>Total de poids livrés </label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_bags_accepted | number:'':'fr-FR'}}</h3>
                            </div>
                            <div class="mb-3">
                                <label>Montant Total des livraison</label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_total_price | number:'':'fr-FR'}}</h3>
                            </div>
                        </div> 
                        <div class="grid grid-cols-1 grid-cols-3 gap-3">
                            <div class="mb-3">
                                <label>Montant total TKM </label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_tkm_amount | number:'':'fr-FR'}}</h3>
                            </div>
                            <div class="mb-3">
                                <label>Valeur totale de production plus TKM </label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_value_prod_plus_tkm | number:'':'fr-FR'}}</h3>
                            </div>
                            <div class="mb-3">
                                <label>Valeur BIC totale</label>
                                <h3 class="form-input">{{listStatistics.nb_supplier_bic_value | number:'':'fr-FR'}}</h3>
                            </div>
                        </div>                                       
                    </form>
                    <div class="table-responsive">
                        <table class="table-hover">
                            <thead>
                                <tr>
                                    <th>N°</th>
                                    <th>Action</th>
                                    <th>Date</th>
                                    <!-- <th>Référence</th> -->
                                    <th>Nombre de sacs déclarés</th>
                                    <th>Poids déclarés</th>
                                    <th>Nombre de sacs refoulés</th>
                                    <th>Poids refoulés</th>
                                    <th>Poids refoulés dûs</th>
                                    <th>Nombre de sacs acceptés</th>
                                    <th>Poids acceptés</th>
                                    <th>Montant</th>
                                    <th>Type</th>
                                    <!-- <th>Méthode de paiement</th>
                                    <th>Effectué(e) par</th> -->
                                    <th>Effectué(e) le</th>
                                    <th>Statut</th>
                                </tr>
                            </thead>
                            <tbody *ngIf="listOperation?.length >= 0">
                                <tr *ngFor="let item of listOperation | filter:informationOperation; let i = index;">
                                    <td>{{i+1}}</td>
                                    <td class="text-center">
                                        <ul class="flex gap-2">
                                            <li *ngIf="item?.status?.id == 3">
                                                <a href="javascript:;" x-tooltip="Annuler l'opération" (click)="itemCancel(item)">
                                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 m-auto text-danger">
                                                        <circle opacity="0.5" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" />
                                                        <path d="M14.5 9.50002L9.5 14.5M9.49998 9.5L14.5 14.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                                    </svg>
                                                </a>
                                            </li>
                                            <li *ngIf="item?.status?.id != 3">
                                                ---
                                            </li>
                                        </ul>
                                    </td>
                                    <td>{{item?.date | date: 'dd/MM/YYYY'}}</td>
                                    <!-- <td>{{item?.reference}}</td> -->
                                    <td>{{item?.bags_declared | number:'':'fr-FR'}}</td>
                                    <td>{{item?.weight_declared | number:'':'fr-FR'}}</td>
                                    <td>{{(item?.bags_declared - item?.bags_accepted) | number:'':'fr-FR'}}</td>
                                    <td>{{item?.refact | number:'':'fr-FR'}}</td>
                                    <td>{{(item?.weight_declared - item?.weight_accepted) | number:'':'fr-FR'}}</td>
                                    <td>{{item?.bags_accepted | number:'':'fr-FR'}}</td>
                                    <td>{{item?.weight_accepted | number:'':'fr-FR'}}</td>
                                    <td>{{item?.total_price | number:'':'fr-FR'}} FCFA</td>
                                    <td>{{item?.operation_type?.label}}</td>
                                    <!-- <td>{{item?.payment_method?.label}}</td>
                                    <td>{{item?.user?.name}}</td> -->
                                    <td>{{item?.created_at | date: 'dd/MM/YYYY HH:mm:ss'}}</td>
                                    <td> 
                                        <span class="badge bg-success" *ngIf="item?.status?.id == 3">{{item?.status?.label}}</span>
                                        <span class="badge bg-danger" *ngIf="item?.status?.id != 3">{{item?.status?.label}}</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <h1 *ngIf="listOperation?.length <= 0" class="text-center items-center p-2">Aucune donnée à afficher</h1>
                    </div>
                    <div class="flex justify-center flex-col w-full mt-2">
                        <div class="grid grid-cols-1 grid-cols-2 gap-2">
                            <div style="padding-top: 10px;">
                                <div class="d-flex mr-5" *ngIf="operation_total">
                                    <b>Affichage de {{operation_from}} à {{to}} sur {{operation_total | number:'':'fr-FR'}} éléments</b>
                                </div>
                                <div class="d-flex mr-5" *ngIf="!operation_total">
                                    <b>Affichage de 0 à 0 sur 0 élément</b>
                                </div>
                            </div>
                            <div class="inline-flex items-center space-x-1 rtl:space-x-reverse m-auto mb-4">
                                <ul class="inline-flex items-center space-x-1 rtl:space-x-reverse m-auto mb-4" *ngIf="operation_total > operation_per_page">
                                    <li (click)="firstPageOperation()">
                                        <button type="button" [disabled]="operation_current_page <= 1" class="flex justify-center font-semibold p-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 rtl:rotate-180">
                                                <path d="M13 19L7 12L13 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                <path opacity="0.5" d="M16.9998 19L10.9998 12L16.9998 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </li>
                                    <li (click)="previousPageOperation()">
                                        <button type="button" [disabled]="operation_current_page <= 1" class="flex justify-center font-semibold p-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 rtl:rotate-180">
                                                <path d="M15 5L9 12L15 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </li>
                                    <li *ngIf="operation_current_page > 2 && (operation_from - (operation_per_page * 2)) < operation_total">
                                        <button type="button" (click)="otherPageLeft2Operation()" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            {{operation_current_page - 2}}
                                        </button>
                                    </li>
                                    <li *ngIf="operation_current_page > 1 && (operation_from - operation_per_page) < operation_total">
                                        <button type="button" (click)="otherPageLeft1Operation()" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            {{operation_current_page - 1}}
                                        </button>
                                    </li>
                                    <li *ngIf="operation_current_page == 1">
                                        <button type="button" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-primary text-white dark:text-white-light dark:bg-primary">
                                            {{operation_current_page}}
                                        </button>
                                    </li>
                                    <li *ngIf="operation_current_page > 1">
                                        <button type="button" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-primary text-white dark:text-white-light dark:bg-primary">
                                            {{operation_current_page}}
                                        </button>
                                    </li>
                                    <li *ngIf="(operation_from + operation_per_page) < operation_total">
                                        <button type="button" (click)="otherPageRigth1Operation()" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            {{operation_current_page + 1}}
                                        </button>
                                    </li>
                                    <li *ngIf="(operation_from + (operation_per_page * 2)) < operation_total">
                                        <button type="button" (click)="otherPageRigth2Operation()" class="flex justify-center font-semibold px-3.5 py-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            {{(operation_current_page / 1) + 2}}
                                        </button>
                                    </li>
                                    <li (click)="nextPageOperation()">
                                        <button type="button" [disabled]="operation_to >= operation_total" class="flex justify-center font-semibold p-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 rtl:rotate-180">
                                                <path d="M9 5L15 12L9 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </li>
                                    <li (click)="lastPageOperation()" tabindex="-1">
                                        <button type="button" [disabled]="operation_to >= operation_total" class="flex justify-center font-semibold p-2 rounded-full transition bg-white-light text-dark hover:text-white hover:bg-primary dark:text-white-light dark:bg-[#191e3a] dark:hover:bg-primary">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 rtl:rotate-180">
                                                <path d="M11 19L17 12L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                <path opacity="0.5" d="M6.99976 19L12.9998 12L6.99976 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="itemSelected && enableItem">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Activation de {{itemSelected.name}}</h5>
                                    <div class="p-5">
                                        <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                            <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                        </div>
                                        <div class="flex justify-center items-center mt-8">
                                            Voulez-vous activer l'entité {{itemSelected.name}} ?
                                        </div>
                                        <div class="flex justify-end items-center mt-8">
                                            <button type="button" (click)="resetAll(); itemSelected = !itemSelected" class="btn btn-outline-danger">Non</button>
                                            <button type="submit" (click)="enable()" [disabled]="submit" *ngIf="!submit" class="btn btn-primary ltr:ml-4 rtl:mr-4">Oui</button>
                                            <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="submit">
                                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                    <line x1="12" y1="2" x2="12" y2="6"></line>
                                                    <line x1="12" y1="18" x2="12" y2="22"></line>
                                                    <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                    <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                    <line x1="2" y1="12" x2="6" y2="12"></line>
                                                    <line x1="18" y1="12" x2="22" y2="12"></line>
                                                    <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                    <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                </svg>
                                                Patientez ...
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="itemSelected && disableItem">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Désactivation de {{itemSelected.name}}</h5>
                                    <div class="p-5">
                                        <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                            <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                        </div>
                                        <div class="flex justify-center items-center mt-8">
                                            Voulez-vous désactiver l'entité {{itemSelected.name}} ?
                                        </div>
                                        <div class="flex justify-end items-center mt-8">
                                            <button type="button" (click)="resetAll(); itemSelected = !itemSelected" class="btn btn-outline-danger">Non</button>
                                            <button type="submit" (click)="disable()" [disabled]="submit" *ngIf="!submit" class="btn btn-primary ltr:ml-4 rtl:mr-4">Oui</button>
                                            <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="submit">
                                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                    <line x1="12" y1="2" x2="12" y2="6"></line>
                                                    <line x1="12" y1="18" x2="12" y2="22"></line>
                                                    <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                    <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                    <line x1="2" y1="12" x2="6" y2="12"></line>
                                                    <line x1="18" y1="12" x2="22" y2="12"></line>
                                                    <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                    <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                </svg>
                                                Patientez ...
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="cancelItem">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Annulation de l'opération de {{operationHistorySelected?.wallet?.entity?.name}}</h5>
                                    <div class="p-5">
                                        <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                            <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                        </div>
                                        <div class="flex justify-center items-center mt-8">
                                            Voulez-vous annuler l'opération de {{operationHistorySelected?.total_price| number:'':'fr-FR'}} FCFA au bénéficiaire {{operationHistorySelected?.wallet?.entity?.name}} {{operationHistorySelected?.purchaser?.last_name}} ?
                                        </div>
                                        <div class="flex justify-end items-center mt-8">
                                            <button type="button" (click)="resetAll(); operationHistoryItem = !operationHistoryItem; cancelItem = !cancelItem" class="btn btn-outline-danger">Non</button>
                                            <button type="submit" (click)="cancel()" [disabled]="submit" *ngIf="!submit" class="btn btn-primary ltr:ml-4 rtl:mr-4">Oui</button>
                                            <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submit" *ngIf="submit">
                                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                    <line x1="12" y1="2" x2="12" y2="6"></line>
                                                    <line x1="12" y1="18" x2="12" y2="22"></line>
                                                    <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                    <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                    <line x1="2" y1="12" x2="6" y2="12"></line>
                                                    <line x1="18" y1="12" x2="22" y2="12"></line>
                                                    <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                    <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                </svg>
                                                Patientez ...
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="itemSelected && operationMandate">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Ajout de mandat au portefeuille de {{entity?.name}}</h5>
                                    <div class="p-5">
                                        <form class="space-y-5" style="padding-bottom: 100px;" (submit)="saveOperationMandate(1)">
                                            <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                                <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                            </div>
                                            <div class="grid grid-cols-1 grid-cols-2 gap-2">
                                                <div class="mb-3" [formGroup]="formGroupOperationMandate">
                                                    <label>Date <span style="color:red">*</span></label>
                                                    <input type="date" class="form-input" formControlName="date" [ngClass]="{ 'is-invalid': submittedOperationMandate && fOperationMandate['date'].errors }"
                                                        name="date" [(ngModel)]="date" />
                                                    <div *ngIf="submittedOperationMandate && fOperationMandate['date'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationMandate && fOperationMandate['date'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Parténaire <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="entity?.name" readonly disabled/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Produit <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected?.entity_product?.product?.label" readonly disabled/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Campagne <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected?.campaign?.label" readonly disabled/>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationMandate">
                                                    <label for="gridPassword">Méthode de paiement <span style="color:red">*</span></label>
                                                    <ng-select id="payment_method_id" name="payment_method_id" formControlName="payment_method_id" [(ngModel)]="payment_method_id" placeholder="Sélectionner" [ngClass]="{ 'is-invalid': submittedOperationMandate && fOperationMandate['payment_method_id'].errors }">
                                                        <ng-option *ngFor="let item of listPaymentMethod" [value]="item.id">{{item.label}}</ng-option>
                                                    </ng-select>
                                                    <div *ngIf="submittedOperationMandate && fOperationMandate['payment_method_id'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationMandate && fOperationMandate['payment_method_id'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationMandate">
                                                    <label>Montant <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="total_price" [ngClass]="{ 'is-invalid': submittedOperationMandate && fOperationMandate['total_price'].errors }"
                                                        name="total_price" [(ngModel)]="total_price" min="0" />
                                                    <div *ngIf="submittedOperationMandate && fOperationMandate['total_price'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationMandate && fOperationMandate['total_price'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                            </div>
                
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="resetAll(); itemDetail = !itemDetail; operationMandate = !operationMandate" class="btn btn-outline-danger">Annuler</button>
                                                <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitOperationMandate" *ngIf="!submitOperationMandate">Enregistrer</button>
                                                <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitOperationMandate" *ngIf="submitOperationMandate">
                                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                        <line x1="2" y1="12" x2="6" y2="12"></line>
                                                        <line x1="18" y1="12" x2="22" y2="12"></line>
                                                        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                    </svg>
                                                    Patientez ...
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="itemSelected && operationDelivery">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Livraison dans le portefeuille de {{entity?.name}}</h5>
                                    <div class="p-5">
                                        <form class="space-y-5" style="padding-bottom: 100px;" (submit)="saveOperationDelivery(3)">
                                            <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                                <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                            </div>
                                            <div class="grid grid-cols-1 grid-cols-3 gap-3">
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Date <span style="color:red">*</span></label>
                                                    <input type="date" class="form-input" formControlName="date" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['date'].errors }"
                                                        name="date" [(ngModel)]="date" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['date'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['date'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Parténaire <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="entity?.name" readonly disabled/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Produit <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected?.entity_product?.product?.label" readonly disabled/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Campagne <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected?.campaign?.label" readonly disabled/>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>N° Connaissement <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" formControlName="conceive_number" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['conceive_number'].errors }"
                                                        name="conceive_number" [(ngModel)]="conceive_number" min="0" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['conceive_number'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['conceive_number'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" >
                                                    <label>N° Immatriculation du véhicule <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" 
                                                        name="vehicle_immatriculation" [(ngModel)]="vehicle_immatriculation" min="0" />
                                                </div>
                                                <div class="mb-3" >
                                                    <label>N° Immatriculation de la remorque <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" 
                                                        name="trailer" [(ngModel)]="trailer" min="0" />
                                                    <!-- <div *ngIf="submittedOperationDelivery && fOperationDelivery['trailer'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['trailer'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div> -->
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Nombre de sacs déclarés <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="bags_declared" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['bags_declared'].errors }"
                                                        name="bags_declared" [(ngModel)]="bags_declared" min="0" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['bags_declared'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['bags_declared'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Poids déclarés <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="weight_declared" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['weight_declared'].errors }"
                                                        name="weight_declared" [(ngModel)]="weight_declared" min="0" (ngModelChange)="amountChange()" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['weight_declared'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['weight_declared'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Nombre de sacs acceptés <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="bags_accepted" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['bags_accepted'].errors }"
                                                        name="bags_accepted" [(ngModel)]="bags_accepted" min="0" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['bags_accepted'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['bags_accepted'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Poids acceptés <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="weight_accepted" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['weight_accepted'].errors }"
                                                        name="weight_accepted" [(ngModel)]="weight_accepted" min="0" (ngModelChange)="amountChange()" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['weight_accepted'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['weight_accepted'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Réfraction <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="refact" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['refact'].errors }"
                                                        name="refact" [(ngModel)]="refact" min="0" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['refact'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['refact'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Valeur BIC <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="bic_value" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['bic_value'].errors }"
                                                        name="bic_value" [(ngModel)]="bic_value" min="0" [value]="weight_accepted * 2.5" (ngModelChange)="amountChange()" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['bic_value'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['bic_value'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Transport Kilométrage (TKM) <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="tkm" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['tkm'].errors }"
                                                        name="tkm" [(ngModel)]="tkm" min="0" (ngModelChange)="amountChange()" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['tkm'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['tkm'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Montant TKM <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="tkm_amount" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['tkm_amount'].errors }"
                                                        name="tkm_amount" [(ngModel)]="tkm_amount" min="0" (ngModelChange)="amountChange()" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['tkm_amount'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['tkm_amount'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Prix unitaire <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="unit_price" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['unit_price'].errors }"
                                                        name="unit_price" [(ngModel)]="unit_price" min="0" [value]="unit_price_value" (ngModelChange)="amountChange()" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['unit_price'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['unit_price'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Montant payé par l'exportateur <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="total_price" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['total_price'].errors }"
                                                        name="total_price" [(ngModel)]="total_price" min="0" [value]="total_price" (ngModelChange)="amountChange()" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['total_price'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['total_price'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Valeur de production + TKM <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="value_prod_plus_tkm" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['value_prod_plus_tkm'].errors }"
                                                        name="value_prod_plus_tkm" [(ngModel)]="value_prod_plus_tkm" min="0" [value]="value_prod_plus_tkm" (ngModelChange)="amountChange()" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['value_prod_plus_tkm'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['value_prod_plus_tkm'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                
                                                <!-- <div class="mb-3" [formGroup]="formGroupOperationDelivery">
                                                    <label>Commission <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="commission" [ngClass]="{ 'is-invalid': submittedOperationDelivery && fOperationDelivery['commission'].errors }"
                                                        name="commission" [(ngModel)]="commission" min="0" />
                                                    <div *ngIf="submittedOperationDelivery && fOperationDelivery['commission'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationDelivery && fOperationDelivery['commission'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div> -->
                                            </div>
                
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="resetAll(); itemDetail = !itemDetail; operationDelivery = !operationDelivery" class="btn btn-outline-danger">Annuler</button>
                                                <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitOperationDelivery" *ngIf="!submitOperationDelivery">Enregistrer</button>
                                                <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitOperationDelivery" *ngIf="submitOperationDelivery">
                                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                        <line x1="2" y1="12" x2="6" y2="12"></line>
                                                        <line x1="18" y1="12" x2="22" y2="12"></line>
                                                        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                    </svg>
                                                    Patientez ...
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="itemSelected && operationPayment">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Versement de la part de {{entity?.name}}</h5>
                                    <div class="p-5">
                                        <form class="space-y-5" style="padding-bottom: 100px;" (submit)="saveOperationPayment(8)">
                                            <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                                <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                            </div>
                                            <div class="grid grid-cols-1 grid-cols-2 gap-2">
                                                <div class="mb-3" [formGroup]="formGroupOperationPayment">
                                                    <label>Date <span style="color:red">*</span></label>
                                                    <input type="date" class="form-input" formControlName="date" [ngClass]="{ 'is-invalid': submittedOperationPayment && fOperationPayment['date'].errors }"
                                                        name="date" [(ngModel)]="date" />
                                                    <div *ngIf="submittedOperationPayment && fOperationPayment['date'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationPayment && fOperationPayment['date'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Parténaire <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="entity?.name" readonly disabled/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Produit <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected?.entity_product?.product?.label" readonly disabled/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Campagne <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected?.campaign?.label" readonly disabled/>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationPayment">
                                                    <label for="gridPassword">Méthode de paiement <span style="color:red">*</span></label>
                                                    <ng-select id="payment_method_id" name="payment_method_id" formControlName="payment_method_id" [(ngModel)]="payment_method_id" placeholder="Sélectionner" [ngClass]="{ 'is-invalid': submittedOperationPayment && fOperationPayment['payment_method_id'].errors }">
                                                        <ng-option *ngFor="let item of listPaymentMethod" [value]="item.id">{{item.label}}</ng-option>
                                                    </ng-select>
                                                    <div *ngIf="submittedOperationPayment && fOperationPayment['payment_method_id'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationPayment && fOperationPayment['payment_method_id'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationPayment">
                                                    <label>Montant <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="total_price" [ngClass]="{ 'is-invalid': submittedOperationPayment && fOperationPayment['total_price'].errors }"
                                                        name="total_price" [(ngModel)]="total_price" min="0" />
                                                    <div *ngIf="submittedOperationPayment && fOperationPayment['total_price'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationPayment && fOperationPayment['total_price'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                            </div>
                
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="resetAll(); itemDetail = !itemDetail; operationPayment = !operationPayment" class="btn btn-outline-danger">Annuler</button>
                                                <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitOperationPayment" *ngIf="!submitOperationPayment">Enregistrer</button>
                                                <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitOperationPayment" *ngIf="submitOperationPayment">
                                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                        <line x1="2" y1="12" x2="6" y2="12"></line>
                                                        <line x1="18" y1="12" x2="22" y2="12"></line>
                                                        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                    </svg>
                                                    Patientez ...
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="itemSelected && operationRepayment">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Remboursement au portefeuille {{itemSelected?.entity_product?.product?.label}} de {{entity?.name}}</h5>
                                    <div class="p-5">
                                        <form class="space-y-5" style="padding-bottom: 100px;" (submit)="saveOperationRepayment(5)">
                                            <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                                <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                            </div>
                                            <div class="grid grid-cols-1 grid-cols-2 gap-2">
                                                <div class="mb-3" [formGroup]="formGroupOperationRepayment">
                                                    <label>Date <span style="color:red">*</span></label>
                                                    <input type="date" class="form-input" formControlName="date" [ngClass]="{ 'is-invalid': submittedOperationRepayment && fOperationRepayment['date'].errors }"
                                                        name="date" [(ngModel)]="date" />
                                                    <div *ngIf="submittedOperationRepayment && fOperationRepayment['date'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationRepayment && fOperationRepayment['date'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Parténaire <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="entity?.name" readonly disabled/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Produit <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected?.entity_product?.product?.label" readonly disabled/>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="gridPassword">Campagne <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="itemSelected?.campaign?.label" readonly disabled/>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationRepayment">
                                                    <label for="gridPassword">Méthode de paiement <span style="color:red">*</span></label>
                                                    <ng-select id="payment_method_id" name="payment_method_id" formControlName="payment_method_id" [(ngModel)]="payment_method_id" placeholder="Sélectionner" [ngClass]="{ 'is-invalid': submittedOperationRepayment && fOperationRepayment['payment_method_id'].errors }">
                                                        <ng-option *ngFor="let item of listPaymentMethod" [value]="item.id">{{item.label}}</ng-option>
                                                    </ng-select>
                                                    <div *ngIf="submittedOperationRepayment && fOperationRepayment['payment_method_id'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationRepayment && fOperationRepayment['payment_method_id'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupOperationRepayment">
                                                    <label>Montant <span style="color:red">*</span></label>
                                                    <input type="number" class="form-input" formControlName="total_price" [ngClass]="{ 'is-invalid': submittedOperationRepayment && fOperationRepayment['total_price'].errors }"
                                                        name="total_price" [(ngModel)]="total_price" min="0" />
                                                    <div *ngIf="submittedOperationRepayment && fOperationRepayment['total_price'].errors" class="mt-1">
                                                        <div *ngIf="submittedOperationRepayment && fOperationRepayment['total_price'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                            </div>
                
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="resetAll(); itemDetail = !itemDetail; operationRepayment = !operationRepayment" class="btn btn-outline-danger">Annuler</button>
                                                <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitOperationRepayment" *ngIf="!submitOperationRepayment">Enregistrer</button>
                                                <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitOperationRepayment" *ngIf="submitOperationRepayment">
                                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                        <line x1="2" y1="12" x2="6" y2="12"></line>
                                                        <line x1="18" y1="12" x2="22" y2="12"></line>
                                                        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                    </svg>
                                                    Patientez ...
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pt-5" *ngIf="walletItem">
                    <div class="row mb-5">
                        <div class="fixed inset-0 bg-[black]/60 z-[999]  hidden" :class="open && '!block'">
                            <div class="flex items-start justify-center min-h-screen px-4">
                                <div x-show="open" x-transition x-transition.duration.300 class="panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-5xl my-8">
                                    <h5 class="font-bold text-lg p-5">Ajout de nouveau portefeuille pour {{entity?.name}}</h5>
                                    <div class="p-5">
                                        <form class="space-y-5" style="padding-bottom: 100px;" (submit)="saveWallet()">
                                            <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                                                <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                                            </div>
                                            <div class="grid grid-cols-1 grid-cols-1 gap-1">
                                                <div class="mb-3" [formGroup]="formGroupWallet">
                                                    <label for="gridPassword">Partenaire <span style="color:red">*</span></label>
                                                    <input type="text" class="form-input" [value]="entity?.name" readonly disabled/>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupWallet">
                                                    <label for="gridPassword">Produit <span style="color:red">*</span></label>
                                                    <ng-select id="entity_product_id" name="entity_product_id" formControlName="entity_product_id" [(ngModel)]="entity_product_id" placeholder="Sélectionner" [ngClass]="{ 'is-invalid': submittedWallet && fWallet['entity_product_id'].errors }">
                                                        <ng-option *ngFor="let item of listEntityProduct" [value]="item.id">{{item.product.label}}</ng-option>
                                                    </ng-select>
                                                    <div *ngIf="submittedWallet && fWallet['entity_product_id'].errors" class="mt-1">
                                                        <div *ngIf="submittedWallet && fWallet['entity_product_id'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                                <div class="mb-3" [formGroup]="formGroupWallet">
                                                    <label for="gridPassword">Campagne <span style="color:red">*</span></label>
                                                    <ng-select id="campaign_id" name="campaign_id" formControlName="campaign_id" [(ngModel)]="campaign_id" placeholder="Sélectionner" [ngClass]="{ 'is-invalid': submittedWallet && fWallet['campaign_id'].errors }">
                                                        <ng-option *ngFor="let item of listEntityCampaign" [value]="item.id">{{item.label}}</ng-option>
                                                    </ng-select>
                                                    <div *ngIf="submittedWallet && fWallet['campaign_id'].errors" class="mt-1">
                                                        <div *ngIf="submittedWallet && fWallet['campaign_id'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                                    </div>
                                                </div>
                                            </div>
                
                                            <div class="flex justify-end items-center mt-8">
                                                <button type="button" (click)="resetAll(); itemDetail = !itemDetail; walletItem = !walletItem" class="btn btn-outline-danger">Annuler</button>
                                                <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitWallet" *ngIf="!submitWallet">Enregistrer</button>
                                                <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitWallet" *ngIf="submitWallet">
                                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                                        <line x1="12" y1="2" x2="12" y2="6"></line>
                                                        <line x1="12" y1="18" x2="12" y2="22"></line>
                                                        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                                        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                                        <line x1="2" y1="12" x2="6" y2="12"></line>
                                                        <line x1="18" y1="12" x2="22" y2="12"></line>
                                                        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                                        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                                    </svg>
                                                    Patientez ...
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="depositItem">
                    <h6 class="font-bold text-lg flex justify-center items-center">Rechargement du portefeuille de {{walletSelected?.product_concerned?.name}}</h6>
                    <form class="space-y-5" style="padding-bottom: 100px; padding-right: 25%; padding-left: 25%;" (submit)="saveDeposit()">
                        <div class="flex items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light" *ngFor="let item of error_message; let i = index;">
                            <span *ngIf="error_message.length > 0" class="ltr:pr-2 rtl:pl-2">{{item.detail}}</span><br>
                        </div>
                        <div class="grid grid-cols-1 grid-cols-1 gap-1">
                            <div class="mb-3" [formGroup]="formGroupDeposit">
                                <label for="gridPassword">Produit <span style="color:red">*</span></label>
                                <input type="text" class="form-input" [value]="walletSelected?.product_concerned?.name" readonly disabled/>
                            </div>
                            <div class="mb-3" [formGroup]="formGroupDeposit">
                                <label>Montant <span style="color:red">*</span></label>
                                <input type="number" class="form-input" formControlName="amount" [ngClass]="{ 'is-invalid': submittedDeposit && fDeposit['amount'].errors }"
                                    name="amount" [(ngModel)]="amount" min="0" />
                                <div *ngIf="submittedDeposit && fDeposit['amount'].errors" class="mt-1">
                                    <div *ngIf="submittedDeposit && fDeposit['amount'].errors?.['required']" class="text-danger">Ce champ est requis !</div>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end items-center mt-8">
                            <button type="button" (click)="resetAll(); depositItem = !depositItem" class="btn btn-outline-danger">Annuler</button>
                            <button type="submit" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitDeposit" *ngIf="!submitDeposit">Enregistrer</button>
                            <button type="button" class="btn btn-primary ltr:ml-4 rtl:mr-4" [disabled]="submitDeposit" *ngIf="submitDeposit">
                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 animate-[spin_2s_linear_infinite] inline-block align-middle ltr:mr-2 rtl:ml-2">
                                    <line x1="12" y1="2" x2="12" y2="6"></line>
                                    <line x1="12" y1="18" x2="12" y2="22"></line>
                                    <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                    <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                    <line x1="2" y1="12" x2="6" y2="12"></line>
                                    <line x1="18" y1="12" x2="22" y2="12"></line>
                                    <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                    <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                </svg>
                                Patientez ...
                            </button>
                        </div>
                    </form>
                </div>
                <app-preloader></app-preloader>
            </div>    
        </div>
    </div>
</div>

